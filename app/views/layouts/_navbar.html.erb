<header class="mb-4">
  <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark">
    <a class="navbar-brand" href="/"><i class="fab fa-neos"></i>andemon</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <% if logged_in? %>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown"><%= current_user.name %> <i class="fas fa-user"></i></a>
            <ul class="dropdown-menu dropdown-menu-right">
              <li class="dropdown-item"><%= link_to 'My profile', user_path(current_user) %></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><%= link_to 'Logout', logout_path, method: :delete %></li>
            </ul>
          </li>
          <li class="nav-item"><%= link_to 'やりとり', exchanges_path, class: 'nav-link' %> <i class="fas fa-handshake" style="color: white;"></i>　</li>
          <li class="nav-item"><%= link_to 'メール', messages_path, class: 'nav-link' %> <i class="fas fa-envelope" style="color: white;"></i> <span class="badge badge-secondary"><%= Message.where(request_id: current_user.requests).count %></span>　</li>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">メニュー</a>
            <ul class="dropdown-menu dropdown-menu-right">
              <li class="dropdown-item"><i class="fas fa-hands"></i>　<%= link_to '全依頼一覧', root_path %>　<span class="badge badge-secondary"><%= Request.count %></span></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="fas fa-laptop"></i>　<%= link_to 'オンライン(ネット完結する仕事)', online_path %>　<span class="badge badge-secondary"><%= Request.where(online_or_offline: "0").count %></span></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="fas fa-people-carry"></i>　<%= link_to 'オフライン(会う必要がある仕事)', offline_path %>　<span class="badge badge-secondary"><%= Request.where(online_or_offline: "1").count %></span></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="fas fa-pray"></i>　<%= link_to '依頼する', new_request_path %></li>
            </ul>
          </li>
        <% else %>
          <li class="nav-item"><%= link_to 'Signup', signup_path, class: 'nav-link' %></li>
          <li class="nav-item"><%= link_to 'Login', login_path, class: 'nav-link' %></li>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">メニュー</a>
            <ul class="dropdown-menu dropdown-menu-right">
              <li class="dropdown-item"><i class="fas fa-hands"></i>　<%= link_to '全依頼一覧', root_path %>　<span class="badge badge-secondary"><%= Request.count %></span></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="fas fa-laptop"></i>　<%= link_to 'オンライン(ネット完結する仕事)', online_path %>　<span class="badge badge-secondary"><%= Request.where(online_or_offline: "0").count %></span></li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="fas fa-people-carry"></i>　<%= link_to 'オフライン(会う必要がある仕事)', offline_path %>　<span class="badge badge-secondary"><%= Request.where(online_or_offline: "1").count %></span></li>
            </ul>
          </li>
        <% end %>
      </ul>
    </div>
  </nav>
</header>